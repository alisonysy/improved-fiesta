{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Card } from '@shopify/polaris';\n\nvar ImageDropZone =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ImageDropZone, _React$Component);\n\n  function ImageDropZone(props) {\n    var _this;\n\n    _classCallCheck(this, ImageDropZone);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ImageDropZone).call(this, props));\n    _this.state = {};\n    _this.inputRef = React.createRef();\n    _this.handleInpImg = _this.handleInpImg.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ImageDropZone, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.bgImg.size) {\n        this.handleInpImg(this.inputRef.current, this.props.bgImg);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var inputBtn = this.inputRef.current;\n      var self = this;\n      inputBtn.addEventListener('change', function (e) {\n        self.handleInpImg(inputBtn, null);\n      });\n    }\n  }, {\n    key: \"handleInpImg\",\n    value: function handleInpImg(tg, file) {\n      var img, imgs, al;\n\n      if (tg.files && tg.files[0]) {\n        img = tg.files[0];\n      } else if (file && file.size) {\n        img = file;\n      }\n\n      var imgWrapper = document.createElement('img');\n      var delBtn = document.createElement('button');\n      var self = this;\n      imgs = tg.parentNode.querySelector('.imgs'); // delete button handling\n\n      delBtn.textContent = 'Delete Image';\n      delBtn.addEventListener('click', function (e) {\n        e.preventDefault();\n        var uploadedImg = imgs.querySelector('img');\n        imgs.removeChild(uploadedImg);\n        imgs.removeChild(delBtn);\n        self.props.uploadBgImg({});\n      });\n      imgWrapper.src = window.URL.createObjectURL(img);\n      al = imgs.querySelector('img');\n\n      if (al) {\n        imgs.removeChild(al);\n        imgs.insertAdjacentElement('afterbegin', imgWrapper);\n      } else {\n        imgs.insertAdjacentElement('afterbegin', imgWrapper);\n        imgs.insertAdjacentElement('beforeend', delBtn);\n      }\n\n      this.props.uploadBgImg(img);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Card.Section, null, __jsx(\"label\", {\n        htmlFor: \"backgroundImg\",\n        style: {\n          marginBottom: '5px'\n        }\n      }, \"Click the drop zone to continue uploading more images:\"), __jsx(\"div\", null, __jsx(\"input\", {\n        id: \"backgroundImg\",\n        type: \"file\",\n        accept: \"image/*\",\n        name: \"bgImg\",\n        ref: this.inputRef\n      }), __jsx(\"div\", {\n        className: \"imgs\"\n      })));\n    }\n  }]);\n\n  return ImageDropZone;\n}(React.Component);\n\nexport default ImageDropZone;","map":{"version":3,"sources":["C:\\Users\\Administrator.SC-201903211547\\projects\\0919\\sample-embedded-app\\snippets\\imageDropZone.js"],"names":["Card","ImageDropZone","props","state","inputRef","React","createRef","handleInpImg","bind","bgImg","size","current","inputBtn","self","addEventListener","e","tg","file","img","imgs","al","files","imgWrapper","document","createElement","delBtn","parentNode","querySelector","textContent","preventDefault","uploadedImg","removeChild","uploadBgImg","src","window","URL","createObjectURL","insertAdjacentElement","marginBottom","Component"],"mappings":"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","sourcesContent":["import { Card } from '@shopify/polaris';\r\n\r\nclass ImageDropZone extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n    }\r\n    this.inputRef = React.createRef();\r\n    this.handleInpImg = this.handleInpImg.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    if(this.props.bgImg.size){\r\n      this.handleInpImg(this.inputRef.current,this.props.bgImg);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(){\r\n    const inputBtn = this.inputRef.current;\r\n    const self = this;\r\n    inputBtn.addEventListener('change',function(e){\r\n      self.handleInpImg(inputBtn,null);\r\n    });\r\n  }\r\n\r\n  handleInpImg(tg,file){\r\n    let img ,imgs,al;\r\n    if(tg.files && tg.files[0]){\r\n      img = tg.files[0];\r\n    }else if(file && file.size){\r\n      img = file;\r\n    }\r\n    let imgWrapper = document.createElement('img');\r\n    let delBtn = document.createElement('button');\r\n    const self = this;\r\n    imgs = tg.parentNode.querySelector('.imgs');\r\n\r\n    // delete button handling\r\n    delBtn.textContent = 'Delete Image';\r\n    delBtn.addEventListener('click',function(e){\r\n      e.preventDefault();\r\n      let uploadedImg = imgs.querySelector('img');\r\n      imgs.removeChild(uploadedImg);\r\n      imgs.removeChild(delBtn);\r\n      self.props.uploadBgImg({});\r\n    });\r\n    imgWrapper.src = window.URL.createObjectURL(img);\r\n\r\n    al = imgs.querySelector('img');\r\n    if(al){\r\n      imgs.removeChild(al);\r\n      imgs.insertAdjacentElement('afterbegin',imgWrapper);\r\n    }else{\r\n      imgs.insertAdjacentElement('afterbegin',imgWrapper);\r\n      imgs.insertAdjacentElement('beforeend',delBtn);\r\n    }\r\n    \r\n    this.props.uploadBgImg(img);\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <Card.Section>\r\n        <label htmlFor=\"backgroundImg\" style={{marginBottom:'5px'}}>Click the drop zone to continue uploading more images:</label>\r\n        <div>\r\n          <input id=\"backgroundImg\" type=\"file\" accept=\"image/*\" name=\"bgImg\" ref={this.inputRef}/>\r\n          <div className=\"imgs\"></div>\r\n        </div>\r\n      </Card.Section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageDropZone;"]},"metadata":{},"sourceType":"module"}