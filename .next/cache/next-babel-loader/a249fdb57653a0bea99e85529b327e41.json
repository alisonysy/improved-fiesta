{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Card, Form, FormLayout } from '@shopify/polaris';\nimport PreviewBar from '../snippets/previewBar';\nimport $ from 'jquery';\n\nclass PreviewPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      scriptCode: ''\n    };\n    this.handleFreeShipping = this.handleFreeShipping.bind(this);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let scriptC = nextProps.customCode.customCode.script;\n\n    if (scriptC && scriptC !== prevState.scriptCode) {\n      PreviewPage.injectScript(scriptC);\n      return _objectSpread({}, prevState, {\n        scriptCode: scriptC\n      });\n    } else {\n      return _objectSpread({}, prevState, {\n        scriptCode: null\n      });\n    }\n  }\n\n  static injectScript(scriptCode) {\n    let scriptEl = document.createElement('script');\n    scriptEl.setAttribute('data-custom', '');\n    let al_script = document.body.querySelector('script[data-custom]');\n\n    if (scriptCode && scriptCode.length !== 0) {\n      scriptEl.textContent = `\n        try{\n          ${scriptCode}\n        }catch(err){\n          console.error(err);\n        }\n      `;\n    }\n\n    if (al_script) {\n      document.body.removeChild(al_script);\n    }\n\n    document.body.appendChild(scriptEl);\n  }\n\n  handleFreeShipping() {}\n\n  render() {\n    const {\n      barTxtConfig,\n      barFrShGl,\n      barLink\n    } = this.props.contentConfig;\n    const bgImg = this.props.bgImg;\n    return __jsx(Card, null, __jsx(Form, null, __jsx(FormLayout, null, __jsx(\"div\", {\n      style: {\n        fontSize: '18px',\n        padding: '1.5em 0 0 1em'\n      }\n    }, \"Preview\"), __jsx(Card.Section, null, barFrShGl ? __jsx(\"div\", null, __jsx(PreviewBar, {\n      barConfig: {\n        bgColor: this.props.styleConfig.colorConfig.bgColor,\n        ftColor: this.props.styleConfig.colorConfig.txtColor,\n        spColor: this.props.styleConfig.colorConfig.specialColor,\n        opacity: this.props.styleConfig.colorConfig.bgOpacity,\n        inpTxt: barTxtConfig.initialMsg1,\n        goal: barFrShGl,\n        addedHtml: barTxtConfig.initialMsg2,\n        bgImg: bgImg,\n        fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n        paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n        fontSize: this.props.styleConfig.fontConfig.fontSize\n      },\n      barLink: barLink,\n      codes: _objectSpread({}, this.props.customCode)\n    }), __jsx(PreviewBar, {\n      barConfig: {\n        bgColor: this.props.styleConfig.colorConfig.bgColor,\n        ftColor: this.props.styleConfig.colorConfig.txtColor,\n        spColor: this.props.styleConfig.colorConfig.specialColor,\n        opacity: this.props.styleConfig.colorConfig.bgOpacity,\n        inpTxt: barTxtConfig.prgMsg1,\n        goal: barFrShGl - 1,\n        addedHtml: barTxtConfig.prgMsg2,\n        bgImg: bgImg,\n        fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n        paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n        fontSize: this.props.styleConfig.fontConfig.fontSize\n      },\n      barLink: barLink,\n      codes: _objectSpread({}, this.props.customCode)\n    })) : null, __jsx(PreviewBar, {\n      barConfig: {\n        bgColor: this.props.styleConfig.colorConfig.bgColor,\n        ftColor: this.props.styleConfig.colorConfig.txtColor,\n        spColor: this.props.styleConfig.colorConfig.specialColor,\n        opacity: this.props.styleConfig.colorConfig.bgOpacity,\n        inpTxt: barTxtConfig.achievedMsg,\n        bgImg: bgImg,\n        fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n        paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n        fontSize: this.props.styleConfig.fontConfig.fontSize\n      },\n      barLink: barLink,\n      codes: _objectSpread({}, this.props.customCode)\n    })))));\n  }\n\n}\n\nexport default PreviewPage;","map":{"version":3,"sources":["C:\\Users\\Administrator.SC-201903211547\\projects\\0919\\sample-embedded-app\\components\\preview.js"],"names":["Card","Form","FormLayout","PreviewBar","$","PreviewPage","React","Component","constructor","props","state","scriptCode","handleFreeShipping","bind","getDerivedStateFromProps","nextProps","prevState","scriptC","customCode","script","injectScript","scriptEl","document","createElement","setAttribute","al_script","body","querySelector","length","textContent","removeChild","appendChild","render","barTxtConfig","barFrShGl","barLink","contentConfig","bgImg","fontSize","padding","bgColor","styleConfig","colorConfig","ftColor","txtColor","spColor","specialColor","opacity","bgOpacity","inpTxt","initialMsg1","goal","addedHtml","initialMsg2","fontFamily","fontConfig","paddingUpDown","barPadding","prgMsg1","prgMsg2","achievedMsg"],"mappings":"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","sourcesContent":["import { Card, Form, FormLayout } from '@shopify/polaris';\r\nimport PreviewBar from '../snippets/previewBar';\r\nimport $ from 'jquery';\r\n\r\nclass PreviewPage extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      scriptCode:'',\r\n    };\r\n    this.handleFreeShipping = this.handleFreeShipping.bind(this);\r\n  };\r\n\r\n  \r\n\r\n\r\n  static getDerivedStateFromProps(nextProps,prevState){\r\n    let scriptC = nextProps.customCode.customCode.script;\r\n    if(scriptC && scriptC !== prevState.scriptCode){\r\n      PreviewPage.injectScript(scriptC);\r\n      return {...prevState,scriptCode:scriptC}\r\n    }else{\r\n      return {...prevState,scriptCode:null}\r\n    }\r\n  };\r\n\r\n  static injectScript(scriptCode){\r\n    let scriptEl = document.createElement('script');\r\n    scriptEl.setAttribute('data-custom','');\r\n    let al_script = document.body.querySelector('script[data-custom]');\r\n    if(scriptCode && scriptCode.length !== 0){\r\n      scriptEl.textContent = `\r\n        try{\r\n          ${scriptCode}\r\n        }catch(err){\r\n          console.error(err);\r\n        }\r\n      `;\r\n    }\r\n    if(al_script){\r\n      document.body.removeChild(al_script);\r\n    }\r\n    document.body.appendChild(scriptEl);\r\n  }\r\n\r\n  handleFreeShipping(){\r\n    \r\n  }\r\n\r\n  render(){\r\n    const {barTxtConfig,barFrShGl,barLink} = this.props.contentConfig;\r\n    const bgImg = this.props.bgImg;\r\n\r\n    return (\r\n      <Card>\r\n        <Form>\r\n          <FormLayout>\r\n            <div style={{fontSize:'18px',padding:'1.5em 0 0 1em'}}>Preview</div>\r\n            <Card.Section>\r\n              { barFrShGl? \r\n                <div>\r\n                  <PreviewBar \r\n                    barConfig={{\r\n                      bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                      ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                      spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                      opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                      inpTxt:barTxtConfig.initialMsg1, \r\n                      goal:barFrShGl,\r\n                      addedHtml:barTxtConfig.initialMsg2,\r\n                      bgImg:bgImg,\r\n                      fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                      paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                      fontSize:this.props.styleConfig.fontConfig.fontSize\r\n                    }}\r\n                    barLink={barLink}\r\n                    codes={{...this.props.customCode}}\r\n                  />\r\n                  <PreviewBar \r\n                    barConfig={{\r\n                      bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                      ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                      spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                      opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                      inpTxt:barTxtConfig.prgMsg1, \r\n                      goal:barFrShGl-1,\r\n                      addedHtml:barTxtConfig.prgMsg2,\r\n                      bgImg:bgImg,\r\n                      fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                      paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                      fontSize:this.props.styleConfig.fontConfig.fontSize\r\n                    }} \r\n                    barLink={barLink}\r\n                    codes={{...this.props.customCode}}\r\n                  />\r\n                </div>\r\n                :\r\n                null\r\n              }\r\n            <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.achievedMsg, \r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              codes={{...this.props.customCode}}\r\n            />\r\n            </Card.Section>\r\n          </FormLayout>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PreviewPage;"]},"metadata":{},"sourceType":"module"}