{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { Card, Form, FormLayout } from '@shopify/polaris';\nimport PreviewBar from '../snippets/previewBar';\n\nclass PreviewPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.parseCssString = this.parseCssString.bind(this);\n  }\n\n  parseCssString(code) {\n    console.log('start parsing');\n    let style = code.style,\n        selectors = [];\n    console.log(style);\n    let styleArr = style.split('}');\n    let regExp = /(.+)[\\s]*\\{(.+)/;\n    styleArr.map(i => {\n      if (i.trim() !== '') {\n        let re = i.match(regExp);\n        let prop_name = re[1],\n            prop_val = re[2];\n        selectors.push({\n          [prop_name]: prop_val\n        });\n      }\n    });\n    console.log(selectors);\n  }\n\n  render() {\n    const {\n      barTxtConfig,\n      barFrShGl,\n      barLink\n    } = this.props.contentConfig;\n    const bgImg = this.props.bgImg;\n    console.log('preview page - style', this.props.styleConfig);\n    console.log('preview page - code', this.props.customCode);\n\n    if (this.props.customCode.style !== '' && this.props.customCode.style !== undefined) {\n      console.log('parsing ready to start');\n      this.parseCssString(this.props.customCode);\n    }\n\n    return __jsx(Card, null, __jsx(Form, null, __jsx(FormLayout, null, __jsx(PreviewBar, {\n      barConfig: {\n        bgColor: this.props.styleConfig.colorConfig.bgColor,\n        ftColor: this.props.styleConfig.colorConfig.txtColor,\n        spColor: this.props.styleConfig.colorConfig.specialColor,\n        opacity: this.props.styleConfig.colorConfig.bgOpacity,\n        inpTxt: barTxtConfig.initialMsg1,\n        goal: barFrShGl,\n        addedHtml: barTxtConfig.initialMsg2,\n        bgImg: bgImg,\n        fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n        paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n        fontSize: this.props.styleConfig.fontConfig.fontSize\n      },\n      barLink: barLink,\n      parseCssString: this.parseCssString\n    }), __jsx(PreviewBar, {\n      barConfig: {\n        bgColor: this.props.styleConfig.colorConfig.bgColor,\n        ftColor: this.props.styleConfig.colorConfig.txtColor,\n        spColor: this.props.styleConfig.colorConfig.specialColor,\n        opacity: this.props.styleConfig.colorConfig.bgOpacity,\n        inpTxt: barTxtConfig.prgMsg1,\n        goal: barFrShGl - 1,\n        addedHtml: barTxtConfig.prgMsg2,\n        bgImg: bgImg,\n        fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n        paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n        fontSize: this.props.styleConfig.fontConfig.fontSize\n      },\n      barLink: barLink,\n      parseCssString: this.parseCssString\n    }), __jsx(PreviewBar, {\n      barConfig: {\n        bgColor: this.props.styleConfig.colorConfig.bgColor,\n        ftColor: this.props.styleConfig.colorConfig.txtColor,\n        spColor: this.props.styleConfig.colorConfig.specialColor,\n        opacity: this.props.styleConfig.colorConfig.bgOpacity,\n        inpTxt: barTxtConfig.achievedMsg,\n        bgImg: bgImg,\n        fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n        paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n        fontSize: this.props.styleConfig.fontConfig.fontSize\n      },\n      barLink: barLink,\n      parseCssString: this.parseCssString\n    }))));\n  }\n\n}\n\nexport default PreviewPage;","map":{"version":3,"sources":["C:\\Users\\Administrator.SC-201903211547\\projects\\0919\\sample-embedded-app\\components\\preview.js"],"names":["Card","Form","FormLayout","PreviewBar","PreviewPage","React","Component","constructor","props","state","parseCssString","bind","code","console","log","style","selectors","styleArr","split","regExp","map","i","trim","re","match","prop_name","prop_val","push","render","barTxtConfig","barFrShGl","barLink","contentConfig","bgImg","styleConfig","customCode","undefined","bgColor","colorConfig","ftColor","txtColor","spColor","specialColor","opacity","bgOpacity","inpTxt","initialMsg1","goal","addedHtml","initialMsg2","fontFamily","fontConfig","paddingUpDown","barPadding","fontSize","prgMsg1","prgMsg2","achievedMsg"],"mappings":"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","sourcesContent":["import { Card, Form, FormLayout } from '@shopify/polaris';\r\nimport PreviewBar from '../snippets/previewBar';\r\n\r\nclass PreviewPage extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={};\r\n    this.parseCssString = this.parseCssString.bind(this)\r\n  }\r\n\r\n  parseCssString(code){\r\n    console.log('start parsing')\r\n    let style = code.style,selectors=[];\r\n    console.log(style);\r\n    let styleArr = style.split('}');\r\n    let regExp = /(.+)[\\s]*\\{(.+)/;\r\n    styleArr.map( i => {\r\n      if(i.trim()!==''){\r\n        let re = i.match(regExp);\r\n        let prop_name = re[1], prop_val=re[2];\r\n        selectors.push({[prop_name]:prop_val})  \r\n      }\r\n    });\r\n    console.log(selectors);\r\n  };\r\n\r\n\r\n  render(){\r\n    const {barTxtConfig,barFrShGl,barLink} = this.props.contentConfig;\r\n    const bgImg = this.props.bgImg;\r\n    console.log('preview page - style',this.props.styleConfig);\r\n    console.log('preview page - code',this.props.customCode);\r\n\r\n    if(this.props.customCode.style !== '' && this.props.customCode.style !== undefined){\r\n      console.log('parsing ready to start')\r\n      this.parseCssString(this.props.customCode);\r\n    }\r\n\r\n    return (\r\n      <Card>\r\n        <Form>\r\n          <FormLayout>\r\n            <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.initialMsg1, \r\n                goal:barFrShGl,\r\n                addedHtml:barTxtConfig.initialMsg2,\r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              parseCssString={this.parseCssString}\r\n            />\r\n            <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.prgMsg1, \r\n                goal:barFrShGl-1,\r\n                addedHtml:barTxtConfig.prgMsg2,\r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              parseCssString={this.parseCssString}\r\n            />\r\n            <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.achievedMsg, \r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              parseCssString={this.parseCssString} \r\n            />\r\n          </FormLayout>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PreviewPage;"]},"metadata":{},"sourceType":"module"}