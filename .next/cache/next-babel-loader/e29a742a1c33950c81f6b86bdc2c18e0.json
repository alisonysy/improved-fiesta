{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Layout, Page } from '@shopify/polaris';\nimport { ResourcePicker, TitleBar } from '@shopify/app-bridge-react';\nimport store from 'store-js';\nimport ResourceListWithProducts from '../components/ResourceList';\nimport BarList from '../components/barList';\nimport TemplateStyle from '../components/templateStyle';\nimport ContentConfigPage from '../components/contentConfig';\nimport StyleConfigPage from '../components/styleConfig';\nimport TargetConfigPage from '../components/targetConfig';\nimport CustomCodePage from '../components/customCode';\nimport PreviewPage from '../components/preview';\nconst img = 'https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg';\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSelection\", src => {\n      const idsFromSrc = src.selection.map(prod => prod.id);\n      this.setState({\n        open: false\n      });\n      console.log(src);\n      store.set('ids', idsFromSrc);\n    });\n\n    this.state = {\n      open: false,\n      onEdit: false,\n      barTxtConfig: {\n        initialMsg1: '',\n        prgMsg1: '',\n        achievedMsg: ''\n      },\n      barFrShGl: 30,\n      barLink: {\n        url: '',\n        openNew: false\n      },\n      barPosition: ''\n    };\n    this.handleEditId = this.handleEditId.bind(this);\n  }\n\n  handleEditId(id) {\n    console.log(id);\n    this.setState({\n      onEdit: true\n    });\n  }\n\n  render() {\n    const emptyState = !store.get('ids');\n    const {\n      barTxtConfig,\n      barFrShGl,\n      barLink\n    } = this.state;\n    return __jsx(Page, null, __jsx(TitleBar, {\n      primaryAction: {\n        content: 'Select prod',\n        onAction: () => this.setState({\n          open: true\n        })\n      }\n    }), __jsx(ResourcePicker, {\n      resourceType: \"Product\",\n      showVariants: true,\n      open: this.state.open,\n      onSelection: src => this.handleSelection(src),\n      onCancel: () => this.setState({\n        open: false\n      })\n    }), __jsx(Layout.Section, null, __jsx(BarList, {\n      handleEditId: id => this.handleEditId(id)\n    }), this.state.onEdit ? __jsx(\"div\", {\n      style: {\n        marginTop: '3em'\n      }\n    }, __jsx(TemplateStyle, null), __jsx(PreviewPage, {\n      contentConfig: {\n        barTxtConfig,\n        barFrShGl,\n        barLink\n      }\n    }), __jsx(ContentConfigPage, {\n      handleContentConfig_msg: msg => this.setState({\n        barTxtConfig: _objectSpread({}, this.barTxtConfig, msg)\n      }),\n      handleContentConfig_goal: gl => this.setState({\n        barFrShGl: gl\n      }),\n      handleContentConfig_link: val => this.setState({\n        barLink: _objectSpread({}, this.state.barLink, val)\n      })\n    }), __jsx(StyleConfigPage, null), __jsx(TargetConfigPage, null), __jsx(CustomCodePage, null)) : null));\n  }\n\n}\n\n;\nexport default Index;","map":{"version":3,"sources":["C:\\Users\\Administrator.SC-201903211547\\projects\\0919\\sample-embedded-app\\pages\\index.js"],"names":["Layout","Page","ResourcePicker","TitleBar","store","ResourceListWithProducts","BarList","TemplateStyle","ContentConfigPage","StyleConfigPage","TargetConfigPage","CustomCodePage","PreviewPage","img","Index","React","Component","constructor","props","src","idsFromSrc","selection","map","prod","id","setState","open","console","log","set","state","onEdit","barTxtConfig","initialMsg1","prgMsg1","achievedMsg","barFrShGl","barLink","url","openNew","barPosition","handleEditId","bind","render","emptyState","get","content","onAction","handleSelection","marginTop","msg","gl","val"],"mappings":"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","sourcesContent":["import { Layout, Page } from '@shopify/polaris';\r\nimport { ResourcePicker, TitleBar } from '@shopify/app-bridge-react';\r\nimport store from 'store-js';\r\n\r\nimport ResourceListWithProducts from '../components/ResourceList';\r\nimport BarList from '../components/barList';\r\nimport TemplateStyle from '../components/templateStyle';\r\nimport ContentConfigPage from '../components/contentConfig';\r\nimport StyleConfigPage from '../components/styleConfig';\r\nimport TargetConfigPage from '../components/targetConfig';\r\nimport CustomCodePage from '../components/customCode';\r\nimport PreviewPage from '../components/preview';\r\n\r\nconst img = 'https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg';\r\n\r\nclass Index extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      onEdit:false,\r\n      barTxtConfig:{initialMsg1:'',prgMsg1:'',achievedMsg:''},\r\n      barFrShGl:30,\r\n      barLink:{url:'',openNew:false},\r\n      barPosition:''\r\n    };\r\n    this.handleEditId = this.handleEditId.bind(this);\r\n  }\r\n\r\n  handleEditId(id){\r\n    console.log(id);\r\n    this.setState({onEdit:true});\r\n  }\r\n\r\n  render(){\r\n    const emptyState = !store.get('ids');\r\n    const {barTxtConfig,barFrShGl,barLink} = this.state;\r\n    return (\r\n      <Page>\r\n        <TitleBar \r\n          primaryAction={{\r\n            content:'Select prod',\r\n            onAction: () => this.setState({ open: true }),\r\n          }}\r\n        />\r\n        <ResourcePicker \r\n          resourceType=\"Product\"\r\n          showVariants={true}\r\n          open={this.state.open}\r\n          onSelection={(src)=> this.handleSelection(src)}\r\n          onCancel={ () => this.setState({ open: false })}\r\n        />\r\n        <Layout.Section>\r\n          <BarList handleEditId={(id) => this.handleEditId(id)}/>\r\n          {\r\n            this.state.onEdit?\r\n            <div style={{marginTop:'3em'}}>\r\n              <TemplateStyle />\r\n              <PreviewPage contentConfig={{barTxtConfig,barFrShGl,barLink}} />\r\n              <ContentConfigPage \r\n                handleContentConfig_msg={(msg)=> this.setState({barTxtConfig:{...this.barTxtConfig,...msg}})} \r\n                handleContentConfig_goal={(gl) => this.setState({barFrShGl:gl})}\r\n                handleContentConfig_link={(val)=> this.setState({barLink:{...this.state.barLink,...val}})}\r\n              />\r\n              <StyleConfigPage />\r\n              <TargetConfigPage />\r\n              <CustomCodePage />\r\n            </div>\r\n            :\r\n            null\r\n          }\r\n          {/* <TemplateStyle /> */}\r\n        </Layout.Section>\r\n        {/* { emptyState ? (\r\n          <Layout>\r\n            <EmptyState\r\n              heading=\"LALALA\"\r\n              action={{\r\n                content:'Select products',\r\n                onAction: () => this.setState({open:true}),\r\n              }}\r\n              image={img}\r\n            >\r\n              <p>Select products to see the console.log hhh</p>\r\n            </EmptyState>\r\n          </Layout>\r\n        ) : (\r\n          <ResourceListWithProducts />\r\n        )} */}\r\n      </Page>\r\n    )\r\n  };\r\n\r\n  handleSelection = (src) => {\r\n    const idsFromSrc = src.selection.map((prod)=> prod.id);\r\n    this.setState({ open: false })\r\n    console.log(src);\r\n    store.set('ids',idsFromSrc)\r\n  }\r\n};\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}