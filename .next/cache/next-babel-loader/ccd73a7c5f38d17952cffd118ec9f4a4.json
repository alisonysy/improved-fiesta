{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Card, Form, FormLayout } from '@shopify/polaris';\nimport PreviewBar from '../snippets/previewBar';\nimport $ from 'jquery';\n\nvar PreviewPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PreviewPage, _React$Component);\n\n  function PreviewPage(props) {\n    var _this;\n\n    _classCallCheck(this, PreviewPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PreviewPage).call(this, props));\n    _this.state = {\n      scriptCode: ''\n    };\n    _this.handleFreeShipping = _this.handleFreeShipping.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(PreviewPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props$contentCo = this.props.contentConfig,\n          barTxtConfig = _this$props$contentCo.barTxtConfig,\n          barFrShGl = _this$props$contentCo.barFrShGl,\n          barLink = _this$props$contentCo.barLink;\n      var bgImg = this.props.bgImg;\n      return __jsx(Card, null, __jsx(Form, null, __jsx(FormLayout, null, __jsx(\"div\", {\n        style: {\n          fontSize: '18px',\n          padding: '1.5em 0 0 1em'\n        }\n      }, \"Preview\"), __jsx(Card.Section, null, barFrShGl ? __jsx(\"div\", null, __jsx(PreviewBar, {\n        barConfig: {\n          bgColor: this.props.styleConfig.colorConfig.bgColor,\n          ftColor: this.props.styleConfig.colorConfig.txtColor,\n          spColor: this.props.styleConfig.colorConfig.specialColor,\n          opacity: this.props.styleConfig.colorConfig.bgOpacity,\n          inpTxt: barTxtConfig.initialMsg1,\n          goal: barFrShGl,\n          addedHtml: barTxtConfig.initialMsg2,\n          bgImg: bgImg,\n          fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n          paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n          fontSize: this.props.styleConfig.fontConfig.fontSize\n        },\n        barLink: barLink,\n        codes: _objectSpread({}, this.props.customCode)\n      }), __jsx(PreviewBar, {\n        barConfig: {\n          bgColor: this.props.styleConfig.colorConfig.bgColor,\n          ftColor: this.props.styleConfig.colorConfig.txtColor,\n          spColor: this.props.styleConfig.colorConfig.specialColor,\n          opacity: this.props.styleConfig.colorConfig.bgOpacity,\n          inpTxt: barTxtConfig.prgMsg1,\n          goal: barFrShGl - 1,\n          addedHtml: barTxtConfig.prgMsg2,\n          bgImg: bgImg,\n          fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n          paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n          fontSize: this.props.styleConfig.fontConfig.fontSize\n        },\n        barLink: barLink,\n        codes: _objectSpread({}, this.props.customCode)\n      })) : null))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var scriptC = nextProps.customCode.customCode.script;\n\n      if (scriptC && scriptC !== prevState.scriptCode) {\n        PreviewPage.injectScript(scriptC);\n        return _objectSpread({}, prevState, {\n          scriptCode: scriptC\n        });\n      } else {\n        return _objectSpread({}, prevState, {\n          scriptCode: null\n        });\n      }\n    }\n  }, {\n    key: \"injectScript\",\n    value: function injectScript(scriptCode) {\n      var scriptEl = document.createElement('script');\n      scriptEl.setAttribute('data-custom', '');\n      var al_script = document.body.querySelector('script[data-custom]');\n\n      if (scriptCode && scriptCode.length !== 0) {\n        scriptEl.textContent = \"\\n        try{\\n          \".concat(scriptCode, \"\\n        }catch(err){\\n          console.error(err);\\n        }\\n      \");\n      }\n\n      if (al_script) {\n        document.body.removeChild(al_script);\n      }\n\n      document.body.appendChild(scriptEl);\n    }\n  }]);\n\n  return PreviewPage;\n}(React.Component);\n\nexport default PreviewPage;","map":{"version":3,"sources":["C:\\Users\\Administrator.SC-201903211547\\projects\\0919\\sample-embedded-app\\components\\preview.js"],"names":["Card","Form","FormLayout","PreviewBar","$","PreviewPage","props","state","scriptCode","handleFreeShipping","bind","contentConfig","barTxtConfig","barFrShGl","barLink","bgImg","fontSize","padding","bgColor","styleConfig","colorConfig","ftColor","txtColor","spColor","specialColor","opacity","bgOpacity","inpTxt","initialMsg1","goal","addedHtml","initialMsg2","fontFamily","fontConfig","paddingUpDown","barPadding","customCode","prgMsg1","prgMsg2","nextProps","prevState","scriptC","script","injectScript","scriptEl","document","createElement","setAttribute","al_script","body","querySelector","length","textContent","removeChild","appendChild","React","Component"],"mappings":"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","sourcesContent":["import { Card, Form, FormLayout } from '@shopify/polaris';\r\nimport PreviewBar from '../snippets/previewBar';\r\nimport $ from 'jquery';\r\n\r\nclass PreviewPage extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      scriptCode:'',\r\n    };\r\n    this.handleFreeShipping = this.handleFreeShipping.bind(this);\r\n  };\r\n\r\n  \r\n\r\n\r\n  static getDerivedStateFromProps(nextProps,prevState){\r\n    let scriptC = nextProps.customCode.customCode.script;\r\n    if(scriptC && scriptC !== prevState.scriptCode){\r\n      PreviewPage.injectScript(scriptC);\r\n      return {...prevState,scriptCode:scriptC}\r\n    }else{\r\n      return {...prevState,scriptCode:null}\r\n    }\r\n  };\r\n\r\n  static injectScript(scriptCode){\r\n    let scriptEl = document.createElement('script');\r\n    scriptEl.setAttribute('data-custom','');\r\n    let al_script = document.body.querySelector('script[data-custom]');\r\n    if(scriptCode && scriptCode.length !== 0){\r\n      scriptEl.textContent = `\r\n        try{\r\n          ${scriptCode}\r\n        }catch(err){\r\n          console.error(err);\r\n        }\r\n      `;\r\n    }\r\n    if(al_script){\r\n      document.body.removeChild(al_script);\r\n    }\r\n    document.body.appendChild(scriptEl);\r\n  }\r\n\r\n\r\n  render(){\r\n    const {barTxtConfig,barFrShGl,barLink} = this.props.contentConfig;\r\n    const bgImg = this.props.bgImg;\r\n\r\n    return (\r\n      <Card>\r\n        <Form>\r\n          <FormLayout>\r\n            <div style={{fontSize:'18px',padding:'1.5em 0 0 1em'}}>Preview</div>\r\n            <Card.Section>\r\n              { barFrShGl? \r\n                <div>\r\n                  <PreviewBar \r\n                    barConfig={{\r\n                      bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                      ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                      spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                      opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                      inpTxt:barTxtConfig.initialMsg1, \r\n                      goal:barFrShGl,\r\n                      addedHtml:barTxtConfig.initialMsg2,\r\n                      bgImg:bgImg,\r\n                      fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                      paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                      fontSize:this.props.styleConfig.fontConfig.fontSize\r\n                    }}\r\n                    barLink={barLink}\r\n                    codes={{...this.props.customCode}}\r\n                  />\r\n                  <PreviewBar \r\n                    barConfig={{\r\n                      bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                      ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                      spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                      opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                      inpTxt:barTxtConfig.prgMsg1, \r\n                      goal:barFrShGl-1,\r\n                      addedHtml:barTxtConfig.prgMsg2,\r\n                      bgImg:bgImg,\r\n                      fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                      paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                      fontSize:this.props.styleConfig.fontConfig.fontSize\r\n                    }} \r\n                    barLink={barLink}\r\n                    codes={{...this.props.customCode}}\r\n                  />\r\n                </div>\r\n                :\r\n                null\r\n              }\r\n            \r\n            </Card.Section>\r\n          </FormLayout>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PreviewPage;"]},"metadata":{},"sourceType":"module"}