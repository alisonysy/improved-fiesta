{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Card, Form, FormLayout } from '@shopify/polaris';\nimport PreviewBar from '../snippets/previewBar';\n\nvar PreviewPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PreviewPage, _React$Component);\n\n  function PreviewPage(props) {\n    var _this;\n\n    _classCallCheck(this, PreviewPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PreviewPage).call(this, props));\n    _this.state = {};\n    _this.parseCssString = _this.parseCssString.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(PreviewPage, [{\n    key: \"parseCssString\",\n    value: function parseCssString(code) {\n      console.log('start parsing');\n      var style = code.style,\n          selectors = [];\n      console.log(style);\n      var styleArr = style.split('}');\n      var regExp = /(.+)[\\s]*\\{(.+)/;\n      styleArr.map(function (i) {\n        if (i.trim() !== '') {\n          var re = i.match(regExp);\n          var prop_name = re[1],\n              prop_val = re[2];\n          selectors.push(_defineProperty({}, prop_name, prop_val));\n        }\n      });\n      console.log(selectors);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$contentCo = this.props.contentConfig,\n          barTxtConfig = _this$props$contentCo.barTxtConfig,\n          barFrShGl = _this$props$contentCo.barFrShGl,\n          barLink = _this$props$contentCo.barLink;\n      var bgImg = this.props.bgImg;\n      console.log('preview page - style', this.props.styleConfig);\n      console.log('preview page - code', this.props.customCode);\n\n      if (this.props.customCode.style !== '' && this.props.customCode.style !== undefined) {\n        console.log('parsing ready to start');\n        this.parseCssString(this.props.customCode);\n      }\n\n      return __jsx(Card, null, __jsx(Form, null, __jsx(FormLayout, null, __jsx(PreviewBar, {\n        barConfig: {\n          bgColor: this.props.styleConfig.colorConfig.bgColor,\n          ftColor: this.props.styleConfig.colorConfig.txtColor,\n          spColor: this.props.styleConfig.colorConfig.specialColor,\n          opacity: this.props.styleConfig.colorConfig.bgOpacity,\n          inpTxt: barTxtConfig.initialMsg1,\n          goal: barFrShGl,\n          addedHtml: barTxtConfig.initialMsg2,\n          bgImg: bgImg,\n          fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n          paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n          fontSize: this.props.styleConfig.fontConfig.fontSize\n        },\n        barLink: barLink,\n        parseCssString: this.parseCssString\n      }), __jsx(PreviewBar, {\n        barConfig: {\n          bgColor: this.props.styleConfig.colorConfig.bgColor,\n          ftColor: this.props.styleConfig.colorConfig.txtColor,\n          spColor: this.props.styleConfig.colorConfig.specialColor,\n          opacity: this.props.styleConfig.colorConfig.bgOpacity,\n          inpTxt: barTxtConfig.prgMsg1,\n          goal: barFrShGl - 1,\n          addedHtml: barTxtConfig.prgMsg2,\n          bgImg: bgImg,\n          fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n          paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n          fontSize: this.props.styleConfig.fontConfig.fontSize\n        },\n        barLink: barLink,\n        parseCssString: this.parseCssString\n      }), __jsx(PreviewBar, {\n        barConfig: {\n          bgColor: this.props.styleConfig.colorConfig.bgColor,\n          ftColor: this.props.styleConfig.colorConfig.txtColor,\n          spColor: this.props.styleConfig.colorConfig.specialColor,\n          opacity: this.props.styleConfig.colorConfig.bgOpacity,\n          inpTxt: barTxtConfig.achievedMsg,\n          bgImg: bgImg,\n          fontFamily: this.props.styleConfig.fontConfig.fontFamily,\n          paddingUpDown: this.props.styleConfig.fontConfig.barPadding,\n          fontSize: this.props.styleConfig.fontConfig.fontSize\n        },\n        barLink: barLink,\n        parseCssString: this.parseCssString\n      }))));\n    }\n  }]);\n\n  return PreviewPage;\n}(React.Component);\n\nexport default PreviewPage;","map":{"version":3,"sources":["C:\\Users\\Administrator.SC-201903211547\\projects\\0919\\sample-embedded-app\\components\\preview.js"],"names":["Card","Form","FormLayout","PreviewBar","PreviewPage","props","state","parseCssString","bind","code","console","log","style","selectors","styleArr","split","regExp","map","i","trim","re","match","prop_name","prop_val","push","contentConfig","barTxtConfig","barFrShGl","barLink","bgImg","styleConfig","customCode","undefined","bgColor","colorConfig","ftColor","txtColor","spColor","specialColor","opacity","bgOpacity","inpTxt","initialMsg1","goal","addedHtml","initialMsg2","fontFamily","fontConfig","paddingUpDown","barPadding","fontSize","prgMsg1","prgMsg2","achievedMsg","React","Component"],"mappings":"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","sourcesContent":["import { Card, Form, FormLayout } from '@shopify/polaris';\r\nimport PreviewBar from '../snippets/previewBar';\r\n\r\nclass PreviewPage extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={};\r\n    this.parseCssString = this.parseCssString.bind(this)\r\n  }\r\n\r\n  parseCssString(code){\r\n    console.log('start parsing')\r\n    let style = code.style,selectors=[];\r\n    console.log(style);\r\n    let styleArr = style.split('}');\r\n    let regExp = /(.+)[\\s]*\\{(.+)/;\r\n    styleArr.map( i => {\r\n      if(i.trim()!==''){\r\n        let re = i.match(regExp);\r\n        let prop_name = re[1], prop_val=re[2];\r\n        selectors.push({[prop_name]:prop_val})  \r\n      }\r\n    });\r\n    console.log(selectors);\r\n  };\r\n\r\n\r\n  render(){\r\n    const {barTxtConfig,barFrShGl,barLink} = this.props.contentConfig;\r\n    const bgImg = this.props.bgImg;\r\n    console.log('preview page - style',this.props.styleConfig);\r\n    console.log('preview page - code',this.props.customCode);\r\n\r\n    if(this.props.customCode.style !== '' && this.props.customCode.style !== undefined){\r\n      console.log('parsing ready to start')\r\n      this.parseCssString(this.props.customCode);\r\n    }\r\n\r\n    return (\r\n      <Card>\r\n        <Form>\r\n          <FormLayout>\r\n            <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.initialMsg1, \r\n                goal:barFrShGl,\r\n                addedHtml:barTxtConfig.initialMsg2,\r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              parseCssString={this.parseCssString}\r\n            />\r\n            <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.prgMsg1, \r\n                goal:barFrShGl-1,\r\n                addedHtml:barTxtConfig.prgMsg2,\r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              parseCssString={this.parseCssString}\r\n            />\r\n            <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.achievedMsg, \r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              parseCssString={this.parseCssString} \r\n            />\r\n          </FormLayout>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PreviewPage;"]},"metadata":{},"sourceType":"module"}