{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { DropZone, Banner, Stack, List, Thumbnail, Caption, Card } from '@shopify/polaris';\n\nclass ImageDropZone extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.inputRef = React.createRef();\n    this.handleInpImg = this.handleInpImg.bind(this);\n  }\n\n  componentDidUpdate() {\n    const inputBtn = this.inputRef.current;\n    const self = this;\n    inputBtn.addEventListener('change', function (e) {\n      self.handleInpImg(inputBtn);\n    });\n  }\n\n  handleInpImg(tg) {\n    let img = tg.files[0],\n        imgs,\n        al;\n    let imgWrapper = document.createElement('img');\n    let delBtn = document.createElement('button');\n    const self = this;\n    imgs = tg.parentNode.querySelector('.imgs'); // delete button handling\n\n    delBtn.textContent = 'Delete Image';\n    delBtn.addEventListener('click', function (e) {\n      e.preventDefault();\n      let uploadedImg = imgs.querySelector('img');\n      imgs.removeChild(uploadedImg);\n      imgs.removeChild(delBtn);\n      self.props.uploadBgImg({});\n    });\n    imgWrapper.src = window.URL.createObjectURL(img);\n    al = imgs.querySelector('img');\n\n    if (al) {\n      imgs.removeChild(al);\n      imgs.insertAdjacentElement('afterbegin', imgWrapper);\n    } else {\n      imgs.insertAdjacentElement('afterbegin', imgWrapper);\n      imgs.insertAdjacentElement('beforeend', delBtn);\n    }\n\n    this.props.uploadBgImg(img);\n  }\n\n  render() {\n    return __jsx(Card.Section, null, __jsx(\"label\", {\n      htmlFor: \"backgroundImg\",\n      style: {\n        marginBottom: '5px'\n      }\n    }, \"Click the drop zone to continue uploading more images:\"), __jsx(\"div\", null, __jsx(\"input\", {\n      id: \"backgroundImg\",\n      type: \"file\",\n      accept: \"image/*\",\n      name: \"bgImg\",\n      ref: this.inputRef\n    }), __jsx(\"div\", {\n      className: \"imgs\"\n    })));\n  }\n\n}\n\nexport default ImageDropZone;","map":{"version":3,"sources":["C:\\Users\\Administrator.SC-201903211547\\projects\\0919\\sample-embedded-app\\snippets\\imageDropZone.js"],"names":["DropZone","Banner","Stack","List","Thumbnail","Caption","Card","ImageDropZone","React","Component","constructor","props","state","inputRef","createRef","handleInpImg","bind","componentDidUpdate","inputBtn","current","self","addEventListener","e","tg","img","files","imgs","al","imgWrapper","document","createElement","delBtn","parentNode","querySelector","textContent","preventDefault","uploadedImg","removeChild","uploadBgImg","src","window","URL","createObjectURL","insertAdjacentElement","render","marginBottom"],"mappings":"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","sourcesContent":["import { DropZone, Banner, Stack, List, Thumbnail, Caption, Card } from '@shopify/polaris';\r\n\r\nclass ImageDropZone extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n    }\r\n    this.inputRef = React.createRef();\r\n    this.handleInpImg = this.handleInpImg.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(){\r\n    const inputBtn = this.inputRef.current;\r\n    const self = this;\r\n    inputBtn.addEventListener('change',function(e){\r\n      self.handleInpImg(inputBtn);\r\n    });\r\n  }\r\n\r\n  handleInpImg(tg){\r\n    let img = tg.files[0],imgs,al;\r\n    let imgWrapper = document.createElement('img');\r\n    let delBtn = document.createElement('button');\r\n    const self = this;\r\n    imgs = tg.parentNode.querySelector('.imgs');\r\n\r\n    // delete button handling\r\n    delBtn.textContent = 'Delete Image';\r\n    delBtn.addEventListener('click',function(e){\r\n      e.preventDefault();\r\n      let uploadedImg = imgs.querySelector('img');\r\n      imgs.removeChild(uploadedImg);\r\n      imgs.removeChild(delBtn);\r\n      self.props.uploadBgImg({});\r\n    });\r\n    imgWrapper.src = window.URL.createObjectURL(img);\r\n\r\n    al = imgs.querySelector('img');\r\n    if(al){\r\n      imgs.removeChild(al);\r\n      imgs.insertAdjacentElement('afterbegin',imgWrapper);\r\n    }else{\r\n      imgs.insertAdjacentElement('afterbegin',imgWrapper);\r\n      imgs.insertAdjacentElement('beforeend',delBtn);\r\n    }\r\n    \r\n    this.props.uploadBgImg(img);\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <Card.Section>\r\n        <label htmlFor=\"backgroundImg\" style={{marginBottom:'5px'}}>Click the drop zone to continue uploading more images:</label>\r\n        <div>\r\n          <input id=\"backgroundImg\" type=\"file\" accept=\"image/*\" name=\"bgImg\" ref={this.inputRef}/>\r\n          <div className=\"imgs\"></div>\r\n        </div>\r\n      </Card.Section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageDropZone;"]},"metadata":{},"sourceType":"module"}