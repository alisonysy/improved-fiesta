{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.fe360d35d0e072b8e521.hot-update.js","sources":["webpack:///./components/preview.js"],"sourcesContent":["import { Card, Form, FormLayout } from '@shopify/polaris';\r\nimport PreviewBar from '../snippets/previewBar';\r\nimport $ from 'jquery';\r\n\r\nclass PreviewPage extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      scriptCode:'',\r\n    };\r\n  };\r\n\r\n  \r\n\r\n\r\n  static getDerivedStateFromProps(nextProps,prevState){\r\n    let scriptC = nextProps.customCode.customCode.script;\r\n    if(scriptC && scriptC !== prevState.scriptCode){\r\n      PreviewPage.injectScript(scriptC);\r\n      return {...prevState,scriptCode:scriptC}\r\n    }else{\r\n      return {...prevState,scriptCode:null}\r\n    }\r\n  };\r\n\r\n  static injectScript(scriptCode){\r\n    let scriptEl = document.createElement('script');\r\n    scriptEl.setAttribute('data-custom','');\r\n    let al_script = document.body.querySelector('script[data-custom]');\r\n    if(scriptCode && scriptCode.length !== 0){\r\n      scriptEl.textContent = `\r\n        try{\r\n          ${scriptCode}\r\n        }catch(err){\r\n          console.error(err);\r\n        }\r\n      `;\r\n    }\r\n    if(al_script){\r\n      document.body.removeChild(al_script);\r\n    }\r\n    document.body.appendChild(scriptEl);\r\n  }\r\n\r\n\r\n\r\n  render(){\r\n    const {barTxtConfig,barFrShGl,barLink} = this.props.contentConfig;\r\n    const bgImg = this.props.bgImg;\r\n\r\n    return (\r\n      <Card>\r\n        <Form>\r\n          <FormLayout>\r\n            <div style={{fontSize:'18px',padding:'1.5em 0 0 1em'}}>Preview</div>\r\n            <Card.Section>\r\n              { barFrShGl? \r\n                <div>\r\n                  <PreviewBar \r\n                    barConfig={{\r\n                      bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                      ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                      spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                      opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                      inpTxt:barTxtConfig.initialMsg1, \r\n                      goal:barFrShGl,\r\n                      addedHtml:barTxtConfig.initialMsg2,\r\n                      bgImg:bgImg,\r\n                      fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                      paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                      fontSize:this.props.styleConfig.fontConfig.fontSize\r\n                    }}\r\n                    barLink={barLink}\r\n                    codes={{...this.props.customCode}}\r\n                  />\r\n                  <PreviewBar \r\n                    barConfig={{\r\n                      bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                      ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                      spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                      opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                      inpTxt:barTxtConfig.prgMsg1, \r\n                      goal:barFrShGl-1,\r\n                      addedHtml:barTxtConfig.prgMsg2,\r\n                      bgImg:bgImg,\r\n                      fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                      paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                      fontSize:this.props.styleConfig.fontConfig.fontSize\r\n                    }} \r\n                    barLink={barLink}\r\n                    codes={{...this.props.customCode}}\r\n                  />\r\n                </div>\r\n                :\r\n                null\r\n              }\r\n              {\r\n                barFrShGl ?\r\n                  <PreviewBar \r\n                    barConfig={{\r\n                      bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                      ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                      spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                      opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                      inpTxt:barTxtConfig.achievedMsg, \r\n                      bgImg:bgImg,\r\n                      fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                      paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                      fontSize:this.props.styleConfig.fontConfig.fontSize\r\n                    }} \r\n                    barLink={barLink}\r\n                    codes={{...this.props.customCode}}\r\n                  />\r\n                  :\r\n                  <PreviewBar \r\n              barConfig={{\r\n                bgColor:this.props.styleConfig.colorConfig.bgColor,\r\n                ftColor:this.props.styleConfig.colorConfig.txtColor,\r\n                spColor:this.props.styleConfig.colorConfig.specialColor,\r\n                opacity:this.props.styleConfig.colorConfig.bgOpacity,\r\n                inpTxt:barTxtConfig.achievedMsg, \r\n                bgImg:bgImg,\r\n                fontFamily:this.props.styleConfig.fontConfig.fontFamily,\r\n                paddingUpDown:this.props.styleConfig.fontConfig.barPadding,\r\n                fontSize:this.props.styleConfig.fontConfig.fontSize\r\n              }} \r\n              barLink={barLink}\r\n              codes={{...this.props.customCode}}\r\n            />\r\n              }\r\n            \r\n            </Card.Section>\r\n          </FormLayout>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PreviewPage;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AADA;AAFA;AAKA;AACA;;;AAmCA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAIA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AAfA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AAfA;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AAbA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AAbA;AAsBA;;;AAzHA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAOA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;;;;AAtCA;AACA;AAsIA;;;;A","sourceRoot":""}