{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.48558ceb8d09e1f76172.hot-update.js","sources":["webpack:///./components/styleConfig.js"],"sourcesContent":["import { Card, Stack, TextField, Button, Form, FormLayout, ColorPicker, RangeSlider} from '@shopify/polaris';\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport ImageDropZone from '../snippets/imageDropZone';\r\nimport '../css/fonts.css';\r\n\r\nfunction ColorPickers(props){\r\n  \r\n  const [color, setColor] = useState({\r\n    hue: 0,\r\n    brightness: 0,\r\n    saturation: 0,\r\n  });\r\n\r\n  useEffect(()=>{\r\n    props.handleColorChange(color);\r\n  },[color])\r\n\r\n  return (\r\n    <div style={{height:'100px',width:'auto',position:'absolute',top:'25px',left:'0',zIndex:'99'}}>\r\n      <ColorPicker onChange={setColor} color={color} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction OpacitySlider(props){\r\n  const [rangeValue, setRangeValue] = useState(100);\r\n\r\n  const handleRangeSliderChange = useCallback(\r\n    (value) => setRangeValue(value),\r\n    [],\r\n  );\r\n\r\n  const suffixStyles = {\r\n    minWidth: '24px',\r\n    textAlign: 'right',\r\n  };\r\n\r\n  useEffect(()=>{\r\n    props.handleBgOpacity(rangeValue);\r\n  },[rangeValue])\r\n\r\n  return (\r\n      <RangeSlider\r\n        output\r\n        label=\"Background Opacity\"\r\n        min={0}\r\n        max={100}\r\n        value={rangeValue}\r\n        onChange={handleRangeSliderChange}\r\n        prefix={<p>0</p>}\r\n        suffix={<p style={suffixStyles}>{rangeValue}</p>}\r\n      />\r\n  );\r\n}\r\n\r\nfunction BackgroundSetting(props){\r\n  const rgbToHex = (rgb) => {\r\n    if(rgb.includes('#')) return rgb;\r\n    let regExp = /\\(\\s*(\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\r\n    let re = rgb.match(regExp);\r\n    if(re){\r\n      let r=parseInt(re[1]).toString(16),\r\n        g=parseInt(re[2]).toString(16),\r\n        b=parseInt(re[3]).toString(16);\r\n      if (r.length == 1)\r\n        r = \"0\" + r;\r\n      if (g.length == 1)\r\n        g = \"0\" + g;\r\n      if (b.length == 1)\r\n        b = \"0\" + b;\r\n      return \"#\" + r + g + b;\r\n    }\r\n  };\r\n  const hslToRgb = (h,s,l) => { // s, l must be fractions of 100;\r\n    let c = (1 - Math.abs(2 * l - 1)) * s,\r\n      x = c * (1 - Math.abs((h / 60) % 2 - 1)),\r\n      m = l - c/2,\r\n      r = 0,\r\n      g = 0,\r\n      b = 0;\r\n    if (0 <= h && h < 60) {\r\n      r = c; g = x; b = 0;\r\n    } else if (60 <= h && h < 120) {\r\n      r = x; g = c; b = 0;\r\n    } else if (120 <= h && h < 180) {\r\n      r = 0; g = c; b = x;\r\n    } else if (180 <= h && h < 240) {\r\n      r = 0; g = x; b = c;\r\n    } else if (240 <= h && h < 300) {\r\n      r = x; g = 0; b = c;\r\n    } else if (300 <= h && h < 360) {\r\n      r = c; g = 0; b = x;\r\n    }\r\n    r = Math.round((r + m) * 255);\r\n    g = Math.round((g + m) * 255);\r\n    b = Math.round((b + m) * 255);\r\n  \r\n    return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n  }\r\n  const [showBgPicker,setBgPicker] = useState(false);\r\n  const [showTxtPicker,setTxtPicker] = useState(false);\r\n  const [showSpTxtPicker,setSpTxtPicker] = useState(false);\r\n  const [bgColor, setBgColor] = useState('#000');\r\n  const [bgOpacity, setBgOpacity] = useState(100);\r\n\r\n  const [txtColor, setTxtColor] = useState('#b31219');\r\n  const [specialColor, setSpecialColor] = useState('#fff');\r\n  let bgColorFrmProps = props.colorConfig.bgColor, txtColorFrmProps = props.colorConfig.txtColor;\r\n\r\n  useEffect(()=>{\r\n    props.handleStyleConfig({\r\n      bgColor:bgColor,\r\n      bgOpacity:bgOpacity,\r\n      txtColor:txtColor,\r\n      specialColor:specialColor\r\n    },undefined);\r\n  },[bgColor,bgOpacity,txtColor,specialColor]);\r\n\r\n  useEffect(()=>{\r\n    setBgColor(rgbToHex(bgColorFrmProps));\r\n  },[bgColorFrmProps]);\r\n\r\n  useEffect(()=>{\r\n    setTxtColor(rgbToHex(txtColorFrmProps));\r\n  },[txtColorFrmProps]);\r\n\r\n\r\n\r\n  return (\r\n    <Card.Section>\r\n      <div style={{display:'flex',alignItems:'center',justifyContent:'flex-start',marginBottom:'1em'}}>\r\n        <div style={{width:'30%'}}>\r\n          <h3>Background color:</h3>\r\n          <Stack alignment=\"center\">\r\n            <div style={{position:'relative'}}>\r\n              <div style={{height:'25px',width:'25px',borderWidth:'1px',borderStyle:'solid',borderColor:'#ddd',display:'inline-block',backgroundColor:bgColor,cursor:'pointer'}} \r\n                onClick={() => setBgPicker(!showBgPicker)}\r\n              ></div>\r\n              { showBgPicker? \r\n                <ColorPickers \r\n                  handleColorChange={(hslCl) => {\r\n                    let cRgb = hslToRgb(hslCl.hue,hslCl.saturation,hslCl.brightness);\r\n                    setBgColor(cRgb);\r\n                  }}\r\n                />\r\n                :\r\n                null\r\n              }\r\n            </div>\r\n            <TextField\r\n              value={bgColor}\r\n              onChange={nw => setBgColor(nw)}\r\n            />\r\n          </Stack>\r\n        </div>\r\n        <div style={{width:'50%'}}>\r\n          <OpacitySlider handleBgOpacity={(val) => setBgOpacity(val)} />\r\n        </div>\r\n      </div>\r\n      <div style={{display:'flex',alignItems:'center',justifyContent:'flex-start'}}>\r\n        <div style={{width:'30%'}}>\r\n          <h3>Text color:</h3>\r\n          <Stack alignment=\"center\">\r\n            <div style={{position:'relative'}}>\r\n            <div style={{height:'25px',width:'25px',borderWidth:'1px',borderStyle:'solid',borderColor:'#ddd',display:'inline-block',backgroundColor:txtColor,cursor:'pointer'}}\r\n              onClick={()=>setTxtPicker(!showTxtPicker)}\r\n            ></div>\r\n              { showTxtPicker?\r\n                <ColorPickers \r\n                  handleColorChange={(hslCl) => {\r\n                    let cRgb = hslToRgb(hslCl.hue,hslCl.saturation,hslCl.brightness);\r\n                    setTxtColor(cRgb);\r\n                  }}\r\n                />\r\n                :\r\n                null\r\n              }\r\n            </div>\r\n            <TextField \r\n              value={txtColor}\r\n              onChange={nw => setTxtColor(nw)}\r\n            />\r\n          </Stack>\r\n        </div>\r\n        <div style={{width:'30%'}}>\r\n          <h3>Special text color:</h3>\r\n          <Stack  alignment=\"center\">\r\n            <div style={{position:'relative'}}>\r\n              <div style={{height:'25px',width:'25px',borderWidth:'1px',borderStyle:'solid',borderColor:'#ddd',display:'inline-block',backgroundColor:specialColor,cursor:'pointer'}}\r\n                onClick={()=>setSpTxtPicker(!showSpTxtPicker)}\r\n              ></div>\r\n              { showSpTxtPicker?\r\n                <ColorPickers \r\n                  handleColorChange={(hslCl) => {\r\n                    let cRgb = hslToRgb(hslCl.hue,hslCl.saturation,hslCl.brightness);\r\n                    setSpecialColor(cRgb);\r\n                  }}\r\n                />\r\n                :\r\n                null\r\n              }\r\n            </div>\r\n            <TextField \r\n              value={rgbToHex(specialColor)}\r\n              onChange={nw => setSpecialColor(nw)}\r\n            />\r\n          </Stack>\r\n        </div>\r\n      </div>\r\n    </Card.Section>\r\n  )\r\n}\r\n\r\nfunction Fonts(props){\r\n  const [fontSize,setFontSize] = useState(18);\r\n  const [padding,setPadding] = useState(10);\r\n  const [fontFam,setFontFam] = useState('sans-serif');\r\n\r\n  const handleFontFam = useCallback(\r\n    (val) => {\r\n      setFontFam(val);\r\n    },\r\n    [fontFam]\r\n  )\r\n\r\n  const handleFontSize = useCallback(\r\n    (val) => {\r\n      setFontSize(val);\r\n    },\r\n    [fontSize]\r\n  );\r\n\r\n  const handlePadding = useCallback(\r\n    (val) => {\r\n      setPadding(val);\r\n    },\r\n    [padding]\r\n  );\r\n\r\n  useEffect(()=>{\r\n    props.handleStyleConfig(undefined,{fontFamily:fontFam,fontSize:fontSize,barPadding:padding});\r\n  },[fontFam,fontSize,padding])\r\n\r\n  return (\r\n    <Card.Section>\r\n      <div>Font family:</div>\r\n      <Button onClick={() => handleFontFam('Montserrat')}>Montserrat</Button>\r\n      <Button onClick={() => handleFontFam('sans-serif')}>Sans serif</Button>\r\n      <TextField \r\n        label=\"Font size:\"\r\n        suffix=\"px\"\r\n        type=\"number\"\r\n        value={fontSize}\r\n        onChange={handleFontSize}\r\n      />\r\n      <TextField \r\n        label=\"Bar padding:\"\r\n        suffix=\"px\"\r\n        type=\"number\"\r\n        value={padding}\r\n        onChange={handlePadding}\r\n      />\r\n    </Card.Section>\r\n  )\r\n}\r\n\r\nclass StyleConfigPage extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      colorConfig:{},\r\n      fontConfig:{},\r\n      bgImg:{}\r\n    }\r\n    this.handleStyleConfig = this.handleStyleConfig.bind(this);\r\n    this.uploadBgImg = this.uploadBgImg.bind(this);\r\n  }\r\n\r\n  handleStyleConfig(colorCf,fontCf){\r\n    this.setState((state)=>{\r\n      if(colorCf===undefined){\r\n        fontCf = {...state.fontConfig,...fontCf};\r\n        return {colorConfig:state.colorConfig,fontConfig:fontCf}\r\n      }else if(fontCf === undefined){\r\n        colorCf = {...state.colorConfig,...colorCf};\r\n        return {colorConfig:colorCf,fontConfig:state.fontConfig}\r\n      }\r\n    },function(){\r\n      this.props.handleStyleConfig(this.state.colorConfig,this.state.fontConfig);\r\n    })\r\n  }\r\n\r\n  uploadBgImg(bgFile){\r\n    this.setState({bgImg:bgFile},function(){\r\n      this.props.uploadBgImg(this.state.bgImg)\r\n    })\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <Card>\r\n        <Form>\r\n          <FormLayout>\r\n            <div style={{fontSize:'18px',padding:'1.5em 0 0 1em'}}>Style Configuration</div>\r\n            <BackgroundSetting handleStyleConfig={this.handleStyleConfig} {...this.props.styleConfig}/>\r\n            <ImageDropZone uploadBgImg={this.uploadBgImg}/>\r\n            <Fonts  handleStyleConfig={this.handleStyleConfig}/>\r\n          </FormLayout>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default StyleConfigPage;"],"mappings":"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","sourceRoot":""}